'use strict';

// server.js
var express = require('express');
var MongoClient = require('mongodb').MongoClient;
var bodyParser = require('body-parser');
var db = require('./config/db');
var app = express();
var port = 8080;

app.use(bodyParser.json());
app.use(function (req, res, next) {
  res.header("Content-Type", 'application/json');
  next();
});
MongoClient.connect(db.url, function (err, dbclient) {
  if (err) return console.log(err);
  var index = require('./app/routes/index');
  index(app, dbclient);
  app.listen(port, function () {
    console.log('We are live on ' + port);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsIk1vbmdvQ2xpZW50IiwiYm9keVBhcnNlciIsImRiIiwiYXBwIiwicG9ydCIsInVzZSIsImpzb24iLCJyZXEiLCJyZXMiLCJuZXh0IiwiaGVhZGVyIiwiY29ubmVjdCIsInVybCIsImVyciIsImRiY2xpZW50IiwiY29uc29sZSIsImxvZyIsImluZGV4IiwibGlzdGVuIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0EsSUFBTUEsVUFBVUMsUUFBUSxTQUFSLENBQWhCO0FBQ0EsSUFBTUMsY0FBY0QsUUFBUSxTQUFSLEVBQW1CQyxXQUF2QztBQUNBLElBQU1DLGFBQWFGLFFBQVEsYUFBUixDQUFuQjtBQUNBLElBQU1HLEtBQUtILFFBQVEsYUFBUixDQUFYO0FBQ0EsSUFBTUksTUFBTUwsU0FBWjtBQUNBLElBQU1NLE9BQU8sSUFBYjs7QUFFQUQsSUFBSUUsR0FBSixDQUFRSixXQUFXSyxJQUFYLEVBQVI7QUFDQUgsSUFBSUUsR0FBSixDQUFRLFVBQVVFLEdBQVYsRUFBZUMsR0FBZixFQUFvQkMsSUFBcEIsRUFBMEI7QUFDaENELE1BQUlFLE1BQUosQ0FBVyxjQUFYLEVBQTBCLGtCQUExQjtBQUNBRDtBQUNELENBSEQ7QUFJQVQsWUFBWVcsT0FBWixDQUFvQlQsR0FBR1UsR0FBdkIsRUFBNEIsVUFBQ0MsR0FBRCxFQUFNQyxRQUFOLEVBQW1CO0FBQzNDLE1BQUlELEdBQUosRUFBUyxPQUFPRSxRQUFRQyxHQUFSLENBQVlILEdBQVosQ0FBUDtBQUNULE1BQU1JLFFBQVFsQixRQUFRLG9CQUFSLENBQWQ7QUFDQWtCLFFBQU1kLEdBQU4sRUFBV1csUUFBWDtBQUNBWCxNQUFJZSxNQUFKLENBQVdkLElBQVgsRUFBaUIsWUFBTTtBQUNyQlcsWUFBUUMsR0FBUixDQUFZLG9CQUFvQlosSUFBaEM7QUFDRCxHQUZEO0FBR0QsQ0FQSCIsImZpbGUiOiJzZXJ2ZXIuanMiLCJzb3VyY2VSb290IjoiRDovRmlsZXMvcGVvbiIsInNvdXJjZXNDb250ZW50IjpbIi8vIHNlcnZlci5qc1xyXG5jb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xyXG5jb25zdCBNb25nb0NsaWVudCA9IHJlcXVpcmUoJ21vbmdvZGInKS5Nb25nb0NsaWVudDtcclxuY29uc3QgYm9keVBhcnNlciA9IHJlcXVpcmUoJ2JvZHktcGFyc2VyJyk7XHJcbmNvbnN0IGRiID0gcmVxdWlyZSgnLi9jb25maWcvZGInKTtcclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5jb25zdCBwb3J0ID0gODA4MDtcclxuXHJcbmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpO1xyXG5hcHAudXNlKGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkge1xyXG4gIHJlcy5oZWFkZXIoXCJDb250ZW50LVR5cGVcIiwnYXBwbGljYXRpb24vanNvbicpO1xyXG4gIG5leHQoKTtcclxufSk7XHJcbk1vbmdvQ2xpZW50LmNvbm5lY3QoZGIudXJsLCAoZXJyLCBkYmNsaWVudCkgPT4ge1xyXG4gICAgaWYgKGVycikgcmV0dXJuIGNvbnNvbGUubG9nKGVycikgICAgXHJcbiAgICBjb25zdCBpbmRleCA9IHJlcXVpcmUoJy4vYXBwL3JvdXRlcy9pbmRleCcpOyAgICBcclxuICAgIGluZGV4KGFwcCwgZGJjbGllbnQpO1xyXG4gICAgYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdXZSBhcmUgbGl2ZSBvbiAnICsgcG9ydCk7XHJcbiAgICB9KTsgICAgICAgICAgICAgICBcclxuICB9KSJdfQ==